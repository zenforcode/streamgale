cmake_minimum_required(VERSION 3.10)
project(TopologyServer)
set(CMAKE_CXX_STANDARD 20)
add_subdirectory(external/crow)
find_path(ASIO_INCLUDE_DIR asio.hpp PATHS /usr/include /usr/local/include)
find_path(CROW_INCLUDE_DIR crow.h PATHS /usr/include /usr/local/include ${CMAKE_SOURCE_DIR}/external/crow/include)

add_executable(toposerver toposerver.cpp)
target_link_libraries(toposerver PRIVATE crow)

if(ASIO_INCLUDE_DIR)
    message(STATUS "Found Asio in: ${ASIO_INCLUDE_DIR}")
    target_include_directories(toposerver PRIVATE ${ASIO_INCLUDE_DIR} ${CROW_INCLUDE_DIR})
else()
    message(FATAL_ERROR "Asio not found!")
endif()
